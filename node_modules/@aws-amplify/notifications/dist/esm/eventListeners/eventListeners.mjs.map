{"version":3,"file":"eventListeners.mjs","sources":["../../../src/eventListeners/eventListeners.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst eventListeners = {};\nexport const notifyEventListeners = (type, ...args) => {\n    eventListeners[type]?.forEach(listener => {\n        listener.handleEvent(...args);\n    });\n};\nexport const notifyEventListenersAndAwaitHandlers = (type, ...args) => Promise.all(Array.from(eventListeners[type] ?? []).map(async (listener) => {\n    try {\n        await listener.handleEvent(...args);\n    }\n    catch (err) {\n        throw err;\n    }\n}));\nexport const addEventListener = (type, handler) => {\n    // If there is no listener set for the event type, just create it\n    if (!eventListeners[type]) {\n        eventListeners[type] = new Set();\n    }\n    const listener = {\n        handleEvent: handler,\n        remove: () => {\n            eventListeners[type].delete(listener);\n        },\n    };\n    eventListeners[type].add(listener);\n    return {\n        remove: () => listener.remove(),\n    };\n};\n"],"names":[],"mappings":"AAAA;AACA;AACA,MAAM,cAAc,GAAG,EAAE,CAAC;AACd,MAAC,oBAAoB,GAAG,CAAC,IAAI,EAAE,GAAG,IAAI,KAAK;AACvD,IAAI,cAAc,CAAC,IAAI,CAAC,EAAE,OAAO,CAAC,QAAQ,IAAI;AAC9C,QAAQ,QAAQ,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,CAAC;AACtC,KAAK,CAAC,CAAC;AACP,EAAE;AACU,MAAC,oCAAoC,GAAG,CAAC,IAAI,EAAE,GAAG,IAAI,KAAK,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,QAAQ,KAAK;AAClJ,IAAI,IAAI;AACR,QAAQ,MAAM,QAAQ,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,CAAC;AAC5C,KAAK;AACL,IAAI,OAAO,GAAG,EAAE;AAChB,QAAQ,MAAM,GAAG,CAAC;AAClB,KAAK;AACL,CAAC,CAAC,EAAE;AACQ,MAAC,gBAAgB,GAAG,CAAC,IAAI,EAAE,OAAO,KAAK;AACnD;AACA,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;AAC/B,QAAQ,cAAc,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC;AACzC,KAAK;AACL,IAAI,MAAM,QAAQ,GAAG;AACrB,QAAQ,WAAW,EAAE,OAAO;AAC5B,QAAQ,MAAM,EAAE,MAAM;AACtB,YAAY,cAAc,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;AAClD,SAAS;AACT,KAAK,CAAC;AACN,IAAI,cAAc,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACvC,IAAI,OAAO;AACX,QAAQ,MAAM,EAAE,MAAM,QAAQ,CAAC,MAAM,EAAE;AACvC,KAAK,CAAC;AACN;;;;"}